<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="乐优电商(03)-品牌管理, 薛定谔的腿毛">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>乐优电商(03)-品牌管理 | 薛定谔的腿毛</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="薛定谔的腿毛" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">薛定谔的腿毛</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">薛定谔的腿毛</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/95.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">乐优电商(03)-品牌管理</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E7%AC%94%E8%AE%B0/">
                                <span class="chip bg-color">笔记</span>
                            </a>
                        
                            <a href="/tags/%E5%89%8D%E7%AB%AF/">
                                <span class="chip bg-color">前端</span>
                            </a>
                        
                            <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%BA%8C/">
                                <span class="chip bg-color">项目实战二</span>
                            </a>
                        
                            <a href="/tags/springcloud/">
                                <span class="chip bg-color">springcloud</span>
                            </a>
                        
                            <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">
                                <span class="chip bg-color">微服务</span>
                            </a>
                        
                            <a href="/tags/%E5%88%86%E9%A1%B5/">
                                <span class="chip bg-color">分页</span>
                            </a>
                        
                            <a href="/tags/Vuejs/">
                                <span class="chip bg-color">Vuejs</span>
                            </a>
                        
                            <a href="/tags/vuetifyjs/">
                                <span class="chip bg-color">vuetifyjs</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%BA%8C/" class="post-category">
                                项目实战二
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-12-27
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2022-05-17
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    29 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        
        <!-- 代码块折行 -->
        <style type="text/css">
            code[class*="language-"], pre[class*="language-"] { white-space: pre-wrap !important; }
        </style>
        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="01、学习目标"><a href="#01、学习目标" class="headerlink" title="01、学习目标"></a>01、学习目标</h2><ul>
<li>实现品牌查询功能</li>
<li>独立实现品牌新增</li>
</ul>
<h2 id="02、从零开始制作页面：添加品牌菜单"><a href="#02、从零开始制作页面：添加品牌菜单" class="headerlink" title="02、从零开始制作页面：添加品牌菜单"></a>02、从零开始制作页面：添加品牌菜单</h2><p><a target="_blank" rel="noopener" href="https://v15.vuetifyjs.com/zh-Hans/getting-started/quick-start">https://v15.vuetifyjs.com/zh-Hans/getting-started/quick-start</a></p>
<p>商品分类完成以后，自然轮到了品牌功能了。</p>
<p>分析左侧菜单的数据：</p>
<p><img src="乐优电商-03-品牌管理.assets/1600821923201.png" alt="1600821923201" style="zoom:67%;"><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/1600821956296.png" alt="1600821956296"></p>
<p><img src="乐优电商-03-品牌管理.assets/1600821923201.png" alt="1600821923201" style="zoom:67%;"><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/1600821956296.png" alt="1600821956296"></p>
<img src="乐优电商-03-品牌管理.assets/1600821979712.png" alt="1600821979712" style="zoom:67%;">

<p>先看看我们要实现的效果：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200417095828922.png" alt="image-20200417095828922"> </p>
<p>接下来，我们从0开始，实现下从前端到后端的完整开发。</p>
<p>提供自定义品牌菜单项</p>
<p>在menu.js中添加菜单名称</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314092117866.png" alt="image-20200314092117866"></p>
<p>在路由router.js指定菜单path所跳转的页面</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314092203699.png" alt="image-20200314092203699"></p>
<p>在对应跳转路径下新建一个MyBrand.vue空文件</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/1575269627152-1578195702430.png" alt="1575269627152"> </p>
<p>MyBrand.vue的内容：</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的品牌页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>




<h2 id="03、从零开始制作页面：品牌列表展示"><a href="#03、从零开始制作页面：品牌列表展示" class="headerlink" title="03、从零开始制作页面：品牌列表展示"></a>03、从零开始制作页面：品牌列表展示</h2><p>参考文档： <a target="_blank" rel="noopener" href="https://v15.vuetifyjs.com/en/getting-started/quick-start">https://v15.vuetifyjs.com/en/getting-started/quick-start</a></p>
<h3 id="1）找到一个服务端分页组件"><a href="#1）找到一个服务端分页组件" class="headerlink" title="1）找到一个服务端分页组件"></a>1）找到一个服务端分页组件</h3><p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314092907926.png" alt="image-20200314092907926"></p>
<p>点进去源码</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314092955711.png" alt="image-20200314092955711"></p>
<p>分别复制template和script到MyBrand.vue页面中，稍微改动了一点点。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
        &lt;v-data-table
                :headers="headers"
                :items="desserts"
                :pagination.sync="pagination"
                :total-items="totalDesserts"
                :loading="loading"
                class="elevation-1"
        &gt;
            &lt;!--
            slot="items" 指定要遍历的数据
            slot-scope="props" 把当前遍历的数据起个别名
            --&gt;
            &lt;template slot="items" slot-scope="props"&gt;
                &lt;td&gt;{{ props.item.name }}&lt;/td&gt;
                &lt;td class="text-xs-right"&gt;{{ props.item.calories }}&lt;/td&gt;
                &lt;td class="text-xs-right"&gt;{{ props.item.fat }}&lt;/td&gt;
                &lt;td class="text-xs-right"&gt;{{ props.item.carbs }}&lt;/td&gt;
                &lt;td class="text-xs-right"&gt;{{ props.item.protein }}&lt;/td&gt;
                &lt;td class="text-xs-right"&gt;{{ props.item.iron }}&lt;/td&gt;
            &lt;/template&gt;
        &lt;/v-data-table&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
    export default {
        data () {
            return {
                totalDesserts: 0,
                desserts: [],
                loading: true,
                pagination: {},
                headers: [
                    {
                        text: 'Dessert (100g serving)',
                        align: 'left',
                        sortable: false,
                        value: 'name'
                    },
                    { text: 'Calories', value: 'calories' },
                    { text: 'Fat (g)', value: 'fat' },
                    { text: 'Carbs (g)', value: 'carbs' },
                    { text: 'Protein (g)', value: 'protein' },
                    { text: 'Iron (%)', value: 'iron' }
                ]
            }
        },
        watch: {
            pagination: {
                handler () {
                    this.getDataFromApi()
                        .then(data =&gt; {
                            this.desserts = data.items
                            this.totalDesserts = data.total
                        })
                },
                deep: true
            }
        },
        mounted () {
            this.getDataFromApi()
                .then(data =&gt; {
                    this.desserts = data.items
                    this.totalDesserts = data.total
                })
        },
        methods: {
            getDataFromApi () {
                this.loading = true
                return new Promise((resolve, reject) =&gt; {
                    const { sortBy, descending, page, rowsPerPage } = this.pagination

                    let items = this.getDesserts()
                    const total = items.length

                    if (this.pagination.sortBy) {
                        items = items.sort((a, b) =&gt; {
                            const sortA = a[sortBy]
                            const sortB = b[sortBy]

                            if (descending) {
                                if (sortA &lt; sortB) return 1
                                if (sortA &gt; sortB) return -1
                                return 0
                            } else {
                                if (sortA &lt; sortB) return -1
                                if (sortA &gt; sortB) return 1
                                return 0
                            }
                        })
                    }

                    if (rowsPerPage &gt; 0) {
                        items = items.slice((page - 1) * rowsPerPage, page * rowsPerPage)
                    }

                    setTimeout(() =&gt; {
                        this.loading = false
                        resolve({
                            items,
                            total
                        })
                    }, 1000)
                })
            },
            getDesserts () {
                return [
                    {
                        name: 'Frozen Yogurt',
                        calories: 159,
                        fat: 6.0,
                        carbs: 24,
                        protein: 4.0,
                        iron: '1%'
                    },
                    {
                        name: 'Ice cream sandwich',
                        calories: 237,
                        fat: 9.0,
                        carbs: 37,
                        protein: 4.3,
                        iron: '1%'
                    },
                    {
                        name: 'Eclair',
                        calories: 262,
                        fat: 16.0,
                        carbs: 23,
                        protein: 6.0,
                        iron: '7%'
                    },
                    {
                        name: 'Cupcake',
                        calories: 305,
                        fat: 3.7,
                        carbs: 67,
                        protein: 4.3,
                        iron: '8%'
                    },
                    {
                        name: 'Gingerbread',
                        calories: 356,
                        fat: 16.0,
                        carbs: 49,
                        protein: 3.9,
                        iron: '16%'
                    },
                    {
                        name: 'Jelly bean',
                        calories: 375,
                        fat: 0.0,
                        carbs: 94,
                        protein: 0.0,
                        iron: '0%'
                    },
                    {
                        name: 'Lollipop',
                        calories: 392,
                        fat: 0.2,
                        carbs: 98,
                        protein: 0,
                        iron: '2%'
                    },
                    {
                        name: 'Honeycomb',
                        calories: 408,
                        fat: 3.2,
                        carbs: 87,
                        protein: 6.5,
                        iron: '45%'
                    },
                    {
                        name: 'Donut',
                        calories: 452,
                        fat: 25.0,
                        carbs: 51,
                        protein: 4.9,
                        iron: '22%'
                    },
                    {
                        name: 'KitKat',
                        calories: 518,
                        fat: 26.0,
                        carbs: 65,
                        protein: 7,
                        iron: '6%'
                    }
                ]
            }
        }
    }
&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2）页面数据分析【data】"><a href="#2）页面数据分析【data】" class="headerlink" title="2）页面数据分析【data】"></a>2）页面数据分析【data】</h3><blockquote>
<p>大家注意：</p>
<p>我们看一个vue页面，一定是从script的data中开始。</p>
<p>整个页面要用到的所有数据，都必须在data中定义。</p>
<p>其中data定义的变量的值的来源又分几类：</p>
<p>收集template页面数据到data中</p>
<p>接收后台响应的数据到data中</p>
<p>纯定义数据在页面使用的</p>
</blockquote>
<p>查看data中的数据</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314094318516.png" alt="image-20200314094318516"></p>
<p>把表头信息改成我们自己的品牌表的字段</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        totalDesserts<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">//总记录数</span>
        desserts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//当前页的数据列表</span>
        loading<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//加载进度条的特效</span>
        pagination<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//分页插件</span>
        headers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token comment">//表头信息</span>
            <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌编号'</span><span class="token punctuation">,</span> align<span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌名称'</span><span class="token punctuation">,</span> align<span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'name'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌图片'</span><span class="token punctuation">,</span> align<span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> sortable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'image'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌字母'</span><span class="token punctuation">,</span> align<span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'letter'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改后页面的效果为：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314094928933.png" alt="image-20200314094928933"></p>
<h3 id="3）渲染列表数据【通过钩子函数获取到要渲染的数据】"><a href="#3）渲染列表数据【通过钩子函数获取到要渲染的数据】" class="headerlink" title="3）渲染列表数据【通过钩子函数获取到要渲染的数据】"></a>3）渲染列表数据【通过钩子函数获取到要渲染的数据】</h3><p>上面，我们已经在data中定义好页面使用的数据了。</p>
<p>接下来，我们要在钩子函数中，向服务器发起请求，并获取数据列表和分页信息。</p>
<p>首先，模拟服务器返回的数据</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2032</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"OPPO"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"1.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"O"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2033</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"飞利浦"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"2.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"F"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2034</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"华为"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"3.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"H"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2036</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"酷派"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"4.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"K"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2037</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"魅族"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"5.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"M"</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>品牌中有id,name,image,letter字段。把这些数据放入页面中。</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314100033759.png" alt="image-20200314100033759"></p>
<p>再次查看页面效果：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314100052347.png" alt="image-20200314100052347"></p>
<p>在template中找到哪个地方使用了数据列表的变量</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314100251243.png" alt="image-20200314100251243"></p>
<p>我们已经知道凡是”:”号开头的属性，都是可以识别vue数据的属性。这里这个:item就是分页列表插件接收列表数据的属性，具体遍历在下面这段代码中：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314100733771.png" alt="image-20200314100733771"></p>
<p>此刻页面效果为：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314100754290.png" alt="image-20200314100754290"></p>
<h3 id="4）总结vue页面渲染数据的流程"><a href="#4）总结vue页面渲染数据的流程" class="headerlink" title="4）总结vue页面渲染数据的流程"></a>4）总结vue页面渲染数据的流程</h3><p>第一步：在data中定义数据</p>
<p>第二步：在钩子函数中发起请求</p>
<p>第三步：如果请求需要参数，在data中直接拿，不需要参数则忽略步骤</p>
<p>第四步：发起服务器请求，在回调函数中，把服务器返回的数据，赋值给data中定义的变量</p>
<p>第五步：直接在template中渲染数据</p>
<h2 id="04、从零开始制作页面：添加按钮和搜索框"><a href="#04、从零开始制作页面：添加按钮和搜索框" class="headerlink" title="04、从零开始制作页面：添加按钮和搜索框"></a>04、从零开始制作页面：添加按钮和搜索框</h2><p>在table上面加入如下代码：</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-layout</span> <span class="token attr-name">row</span> <span class="token attr-name">wrap</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-flex</span> <span class="token attr-name">xs6</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-btn</span> <span class="token attr-name">round</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">dark</span><span class="token punctuation">&gt;</span></span>品牌添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-btn</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-flex</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-flex</span> <span class="token attr-name">xs6</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-text-field</span>
                  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>搜索<span class="token punctuation">"</span></span>
                  <span class="token attr-name">prepend-icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-text-field</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-flex</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-layout</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>此刻效果如下：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314103420235.png" alt="image-20200314103420235"></p>
<p>MyBrand.vue页面</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-layout</span> <span class="token attr-name">row</span> <span class="token attr-name">wrap</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-flex</span> <span class="token attr-name">xs6</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-btn</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">round</span><span class="token punctuation">&gt;</span></span>品牌添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-btn</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-flex</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-flex</span> <span class="token attr-name">xs6</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-text-field</span>
                        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>搜索<span class="token punctuation">"</span></span>
                        <span class="token attr-name">prepend-icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span>
                <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-text-field</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-flex</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-layout</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
            headers: 定义表头信息
            items： 定义表的内容（数据列表） ***
            pagination： 定义分页参数数据  ***
            total-items： 总记录数   ***
            loading： 进度条效果
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-data-table</span>
                <span class="token attr-name">:headers</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>headers<span class="token punctuation">"</span></span>
                <span class="token attr-name">:items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>desserts<span class="token punctuation">"</span></span>
                <span class="token attr-name">:pagination.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination<span class="token punctuation">"</span></span>
                <span class="token attr-name">:total-items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>totalDesserts<span class="token punctuation">"</span></span>
                <span class="token attr-name">:loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span>
                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>elevation-1<span class="token punctuation">"</span></span>
        <span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>props<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xs-center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ props.item.id }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xs-center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ props.item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xs-center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ props.item.image }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-xs-center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ props.item.letter }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-data-table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                totalDesserts<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                desserts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                loading<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                pagination<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                headers<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌编号'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'id'</span> <span class="token punctuation">,</span> align<span class="token operator">:</span><span class="token string">'center'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌名称'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> align<span class="token operator">:</span><span class="token string">'center'</span> <span class="token punctuation">,</span>sortable<span class="token operator">:</span><span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌图片'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'image'</span><span class="token punctuation">,</span> align<span class="token operator">:</span><span class="token string">'center'</span> <span class="token punctuation">,</span>sortable<span class="token operator">:</span><span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'品牌字母'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'letter'</span><span class="token punctuation">,</span> align<span class="token operator">:</span><span class="token string">'center'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        watch<span class="token operator">:</span> <span class="token punctuation">{</span>
            pagination<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token function">handler</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDataFromApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                            <span class="token keyword">this</span><span class="token punctuation">.</span>desserts <span class="token operator">=</span> data<span class="token punctuation">.</span>items
                            <span class="token keyword">this</span><span class="token punctuation">.</span>totalDesserts <span class="token operator">=</span> data<span class="token punctuation">.</span>total
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                deep<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDataFromApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>desserts <span class="token operator">=</span> data<span class="token punctuation">.</span>items
                    <span class="token keyword">this</span><span class="token punctuation">.</span>totalDesserts <span class="token operator">=</span> data<span class="token punctuation">.</span>total
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        methods<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">getDataFromApi</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> sortBy<span class="token punctuation">,</span> descending<span class="token punctuation">,</span> page<span class="token punctuation">,</span> rowsPerPage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pagination

                    <span class="token keyword">let</span> items <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDesserts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">const</span> total <span class="token operator">=</span> items<span class="token punctuation">.</span>length

                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>sortBy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        items <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                            <span class="token keyword">const</span> sortA <span class="token operator">=</span> a<span class="token punctuation">[</span>sortBy<span class="token punctuation">]</span>
                            <span class="token keyword">const</span> sortB <span class="token operator">=</span> b<span class="token punctuation">[</span>sortBy<span class="token punctuation">]</span>

                            <span class="token keyword">if</span> <span class="token punctuation">(</span>descending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>sortA <span class="token operator">&lt;</span> sortB<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>sortA <span class="token operator">&gt;</span> sortB<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
                                <span class="token keyword">return</span> <span class="token number">0</span>
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>sortA <span class="token operator">&lt;</span> sortB<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>sortA <span class="token operator">&gt;</span> sortB<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span>
                                <span class="token keyword">return</span> <span class="token number">0</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>

                    <span class="token keyword">if</span> <span class="token punctuation">(</span>rowsPerPage <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        items <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> rowsPerPage<span class="token punctuation">,</span> page <span class="token operator">*</span> rowsPerPage<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>

                    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                            items<span class="token punctuation">,</span>
                            total
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">getDesserts</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span>  <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2032</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"OPPO"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"1.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"O"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2033</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"飞利浦"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"2.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"F"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2034</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"华为"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"3.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"H"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2036</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"酷派"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"4.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"K"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2037</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"魅族"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"5.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"M"</span><span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<h2 id="05、从零开始制作页面：改为服务端分页"><a href="#05、从零开始制作页面：改为服务端分页" class="headerlink" title="05、从零开始制作页面：改为服务端分页"></a>05、从零开始制作页面：改为服务端分页</h2><h3 id="1）删除客户端分页的代码"><a href="#1）删除客户端分页的代码" class="headerlink" title="1）删除客户端分页的代码"></a>1）删除客户端分页的代码</h3><p>虽然我们用的是服务端分页的插件，但是vuetify为了便于前端工作人员，可以更好的调整页面样式，给我们临时做了一个页面效果出来，我们要去掉这个效果，其实就是删除getDataFromApi方法，并删除相关连带的部分，最终代码如下：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
        &lt;v-layout row wrap&gt;
            &lt;v-flex xs6&gt;
                &lt;v-btn round color="primary" dark&gt;品牌添加&lt;/v-btn&gt;
            &lt;/v-flex&gt;
            &lt;v-flex xs6&gt;
            &lt;v-text-field
                    label="搜索"
                    prepend-icon="search"
            &gt;&lt;/v-text-field&gt;
            &lt;/v-flex&gt;
        &lt;/v-layout&gt;
        &lt;v-data-table
                :headers="headers"
                :items="desserts"
                :pagination.sync="pagination"
                :total-items="totalDesserts"
                :loading="loading"
                class="elevation-1"
        &gt;
            &lt;!--
            slot="items" 指定要遍历的数据
            slot-scope="props" 把当前遍历的数据items起个别名
            props中有个固定的属性叫item，是props遍历时的临时变量
            也就是说item就相当于一个品牌对象了
            --&gt;
            &lt;template slot="items" slot-scope="props"&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.id }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.name }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.image }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.letter }}&lt;/td&gt;
            &lt;/template&gt;
        &lt;/v-data-table&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
    export default {
        data () {
            return {
                totalDesserts: 0,//总记录数
                desserts: [],//当前页的数据列表
                loading: true,//加载进度条的特效
                pagination: {},//分页插件
                headers: [//表头信息
                    { text: '品牌编号', align: 'center', value: 'id'},
                    { text: '品牌名称', align: 'center', value: 'name' },
                    { text: '品牌图片', align: 'center', sortable: false, value: 'image' },
                    { text: '品牌字母', align: 'center', value: 'letter' }
                ]
            }
        },
        mounted () {

        },
        methods: {

            getDesserts () {
                return  [
                    {id: 2032, name: "OPPO", image: "1.jpg", letter: "O"},
                    {id: 2033, name: "飞利浦", image: "2.jpg", letter: "F"},
                    {id: 2034, name: "华为", image: "3.jpg", letter: "H"},
                    {id: 2036, name: "酷派", image: "4.jpg", letter: "K"},
                    {id: 2032, name: "OPPO", image: "1.jpg", letter: "O"},
                    {id: 2033, name: "飞利浦", image: "2.jpg", letter: "F"},
                    {id: 2034, name: "华为", image: "3.jpg", letter: "H"},
                    {id: 2036, name: "酷派", image: "4.jpg", letter: "K"},
                    {id: 2036, name: "酷派", image: "4.jpg", letter: "K"},
                    {id: 2036, name: "酷派", image: "4.jpg", letter: "K"},
                    {id: 2036, name: "酷派", image: "4.jpg", letter: "K"},
                    {id: 2037, name: "魅族", image: "5.jpg", letter: "M"}
                ]
            }
        }
    }
&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2）自己来定义一个服务端分页的请求方法"><a href="#2）自己来定义一个服务端分页的请求方法" class="headerlink" title="2）自己来定义一个服务端分页的请求方法"></a>2）自己来定义一个服务端分页的请求方法</h3><p>在methods中定义方法：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">loadBrandData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>desserts <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDesserts</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//给当前data中的数据列表赋值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>totalDesserts <span class="token operator">=</span> <span class="token number">20</span> <span class="token comment">//给总数据量赋值</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在钩子函数中调用上面的方法：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//发起服务端分页请求</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBrandData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>此刻最终代码如下：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
        &lt;v-layout row wrap&gt;
            &lt;v-flex xs6&gt;
                &lt;v-btn color="primary" round&gt;品牌添加&lt;/v-btn&gt;
            &lt;/v-flex&gt;
            &lt;v-flex xs6&gt;
                &lt;v-text-field
                        label="搜索"
                        prepend-icon="search"
                &gt;&lt;/v-text-field&gt;
            &lt;/v-flex&gt;

        &lt;/v-layout&gt;
        &lt;!--
            headers: 定义表头信息
            items： 定义表的内容（数据列表） ***
            pagination： 定义分页参数数据  ***
            total-items： 总记录数   ***
            loading： 进度条效果
        --&gt;
        &lt;v-data-table
                :headers="headers"
                :items="desserts"
                :pagination.sync="pagination"
                :total-items="totalDesserts"
                :loading="loading"
                class="elevation-1"
        &gt;
            &lt;template v-slot:items="props"&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.id }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.name }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.image }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.letter }}&lt;/td&gt;
            &lt;/template&gt;
        &lt;/v-data-table&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data () {
            return {
                totalDesserts: 0,
                desserts: [],
                loading: true,
                pagination: {},
                headers: [
                    { text: '品牌编号', value: 'id' , align:'center'},
                    { text: '品牌名称', value: 'name', align:'center' ,sortable:false },
                    { text: '品牌图片', value: 'image', align:'center' ,sortable:false },
                    { text: '品牌字母', value: 'letter', align:'center' },
                ]
            }
        },
        mounted () {
            //调用分页查询品牌
            this.loadBrandData();
        },
        methods: {
            //分页查询品牌
            loadBrandData(){
                this.desserts = this.getDesserts();
                this.totalDesserts = 20;
            },

            getDesserts () {
                return  [
                    {id: 2032, name: "OPPO", image: "1.jpg", letter: "O"},
                    {id: 2033, name: "飞利浦", image: "2.jpg", letter: "F"},
                    {id: 2034, name: "华为", image: "3.jpg", letter: "H"},
                    {id: 2036, name: "酷派", image: "4.jpg", letter: "K"},
                    {id: 2037, name: "魅族", image: "5.jpg", letter: "M"}
                ]
            }
        }
    }
&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="06、从零开始制作页面：向后端请求品牌分页数据"><a href="#06、从零开始制作页面：向后端请求品牌分页数据" class="headerlink" title="06、从零开始制作页面：向后端请求品牌分页数据"></a>06、从零开始制作页面：向后端请求品牌分页数据</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>截至目前，我们的品牌静态页面已经做好了，接下来，就是vue代码部分了！</p>
<p>使用vue把静态页面变成动态页面的步骤如下：</p>
<h3 id="第一步：参考开发api文档"><a href="#第一步：参考开发api文档" class="headerlink" title="第一步：参考开发api文档"></a>第一步：参考开发api文档</h3><p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314105447150.png" alt="image-20200314105447150"></p>
<h3 id="第二步：根据api要求提供要向后台传输的参数"><a href="#第二步：根据api要求提供要向后台传输的参数" class="headerlink" title="第二步：根据api要求提供要向后台传输的参数"></a>第二步：根据api要求提供要向后台传输的参数</h3><p>在data中定义一个变量接收搜索数据</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314105657844.png" alt="image-20200314105657844"></p>
<p>在页面上使用双向绑定给searchKey赋值</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314105744685.png" alt="image-20200314105744685"></p>
<p>如果我们使用了vuetify，那么所有分页相关的数据，无需自己在data中定义，在data中的pagination是空对象，但是我们用vue的chrome插件查看页面的数据发现，里面都已经包含了所有的分页条件，如下：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/1575283525398.png" alt="1575283525398"> </p>
<p>条件如下：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"descending"</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">"page"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"rowsPerPage"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token property">"sortBy"</span><span class="token operator">:</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token property">"totalItems"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>我们在代码中并没有给pagination赋值，但是发现打开页面它就自己有值了，所以是框架给我们赋的值，也就是说这些数据我们都不用关心了，我们只需要把后台的数据正确返回页面就能显示了。</p>
<h3 id="第三步：页面发起后台服务器请求"><a href="#第三步：页面发起后台服务器请求" class="headerlink" title="第三步：页面发起后台服务器请求"></a>第三步：页面发起后台服务器请求</h3><p>修改向后台发起请求的方法：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">methods<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//分页查询品牌</span>
            <span class="token function">loadBrandData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//请求后台</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/item/brand/page'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                    params<span class="token operator">:</span><span class="token punctuation">{</span>
                      page<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>page<span class="token punctuation">,</span>
                      rows<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>rowsPerPage<span class="token punctuation">,</span>
                      key<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>searchKey<span class="token punctuation">,</span>
                      sortBy<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>sortBy<span class="token punctuation">,</span>
                      desc<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>descending
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>desserts <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDesserts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>totalDesserts <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'查询品牌失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>

            <span class="token function">getDesserts</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span>  <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2032</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"OPPO"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"1.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"O"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2033</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"飞利浦"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"2.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"F"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2034</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"华为"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"3.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"H"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2036</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"酷派"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"4.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"K"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2037</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"魅族"</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token string">"5.jpg"</span><span class="token punctuation">,</span> letter<span class="token operator">:</span> <span class="token string">"M"</span><span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过页面f12在网络中查看效果</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314111449691.png" alt="image-20200314111449691"></p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314111504448.png" alt="image-20200314111504448"></p>
<h2 id="07、从零开始制作页面：监听分页参数与查询条件"><a href="#07、从零开始制作页面：监听分页参数与查询条件" class="headerlink" title="07、从零开始制作页面：监听分页参数与查询条件"></a>07、从零开始制作页面：监听分页参数与查询条件</h2><p>添加watch的监听事件，由于分页参数是一个对象，所以我们需要使用深度监听。</p>
<p>在Vue中添加watch事件</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">//监听</span>
        watch<span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string">"searchKey"</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBrandData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">"pagination"</span><span class="token operator">:</span><span class="token punctuation">{</span>
                deep<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//深度监听。注意：监听对象里面的属性变化时用到</span>
                <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBrandData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>最终页面代码为：</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
        &lt;v-layout row wrap&gt;
            &lt;v-flex xs6&gt;
                &lt;v-btn color="primary" round&gt;品牌添加&lt;/v-btn&gt;
            &lt;/v-flex&gt;
            &lt;v-flex xs6&gt;
                &lt;v-text-field
                        label="搜索"
                        prepend-icon="search"
                        v-model="searchKey"
                &gt;&lt;/v-text-field&gt;
            &lt;/v-flex&gt;

        &lt;/v-layout&gt;
        &lt;!--
            headers: 定义表头信息
            items： 定义表的内容（数据列表） ***
            pagination： 定义分页参数数据  ***
            total-items： 总记录数   ***
            loading： 进度条效果
        --&gt;
        &lt;v-data-table
                :headers="headers"
                :items="desserts"
                :pagination.sync="pagination"
                :total-items="totalDesserts"
                :loading="loading"
                class="elevation-1"
        &gt;
            &lt;template v-slot:items="props"&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.id }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.name }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.image }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.letter }}&lt;/td&gt;
            &lt;/template&gt;
        &lt;/v-data-table&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data () {
            return {
                totalDesserts: 0,
                desserts: [],
                loading: true,
                pagination: {},
                headers: [
                    { text: '品牌编号', value: 'id' , align:'center'},
                    { text: '品牌名称', value: 'name', align:'center' ,sortable:false },
                    { text: '品牌图片', value: 'image', align:'center' ,sortable:false },
                    { text: '品牌字母', value: 'letter', align:'center' },
                ],
                searchKey:'',//搜索关键词
            }
        },
        mounted () {
            //调用分页查询品牌
            this.loadBrandData();
        },
        //监听
        watch:{
            "searchKey":{
                handler(){
                    this.loadBrandData();
                }
            },
            "pagination":{
                deep:true,//深度监听。注意：监听对象里面的属性变化时用到
                handler(){
                    this.loadBrandData();
                }
            }
        },
        methods: {
            //分页查询品牌
            loadBrandData(){
                //请求后台
                this.$http.get('/item/brand/page',{
                    params:{
                      page:this.pagination.page,
                      rows:this.pagination.rowsPerPage,
                      key:this.searchKey,
                      sortBy:this.pagination.sortBy,
                      desc:this.pagination.descending
                    }
                }).then(resp=&gt;{
                    this.desserts = this.getDesserts();
                    this.totalDesserts = 20;
                }).catch(e=&gt;{
                    console.log('查询品牌失败');
                })
            },

            getDesserts () {
                return  [
                    {id: 2032, name: "OPPO", image: "1.jpg", letter: "O"},
                    {id: 2033, name: "飞利浦", image: "2.jpg", letter: "F"},
                    {id: 2034, name: "华为", image: "3.jpg", letter: "H"},
                    {id: 2036, name: "酷派", image: "4.jpg", letter: "K"},
                    {id: 2037, name: "魅族", image: "5.jpg", letter: "M"}
                ]
            }
        }
    }
&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<h2 id="08、编写品牌后台接口：品牌模块的准备工作"><a href="#08、编写品牌后台接口：品牌模块的准备工作" class="headerlink" title="08、编写品牌后台接口：品牌模块的准备工作"></a>08、编写品牌后台接口：品牌模块的准备工作</h2><h3 id="1）通用的分页对象"><a href="#1）通用的分页对象" class="headerlink" title="1）通用的分页对象"></a>1）通用的分页对象</h3><p>我们把这个对象放到 ly-common 模块的pojo包中。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>common<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 通用的分页封装对象
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> total<span class="token punctuation">;</span><span class="token comment">//总记录数</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> totalPage<span class="token punctuation">;</span><span class="token comment">//总页数</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> items<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2）品牌entity对象"><a href="#2）品牌entity对象" class="headerlink" title="2）品牌entity对象"></a>2）品牌entity对象</h3><p>放在ly-item-pojo模块的pojo包下</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IdType</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableId</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableName</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 品牌
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"tb_brand"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Brand</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> image<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> letter<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3）创建Mapper"><a href="#3）创建Mapper" class="headerlink" title="3）创建Mapper"></a>3）创建Mapper</h3><p>放在ly-item项目下</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Brand</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BrandMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4）创建service"><a href="#4）创建service" class="headerlink" title="4）创建service"></a>4）创建service</h3><p>放在ly-item项目下</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BrandMapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 品牌Service
 */</span>
<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BrandService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BrandMapper</span> brandMapper<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5）创建controller"><a href="#5）创建controller" class="headerlink" title="5）创建controller"></a>5）创建controller</h3><p>放在ly-item项目下</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">BrandService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BrandController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BrandService</span> brandService<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="09、编写品牌后台接口：品牌分页查询"><a href="#09、编写品牌后台接口：品牌分页查询" class="headerlink" title="09、编写品牌后台接口：品牌分页查询(**)"></a>09、编写品牌后台接口：品牌分页查询(**)</h2><h3 id="1）-独立创建MybatisPlus分页拦截器"><a href="#1）-独立创建MybatisPlus分页拦截器" class="headerlink" title="1） 独立创建MybatisPlus分页拦截器(*)"></a>1） 独立创建MybatisPlus分页拦截器(*)</h3><p>编写分页配置类</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span><span class="token class-name">PaginationInterceptor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 分页插件配置类
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageHelperConfiguration</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 创建分页插件拦截器对象
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">PaginationInterceptor</span> <span class="token function">paginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PaginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="乐优电商-03-品牌管理.assets/assets/1603595828422.png" alt="1603595828422" style="zoom:67%;">



<h3 id="2）编写处理器"><a href="#2）编写处理器" class="headerlink" title="2）编写处理器"></a>2）编写处理器</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>common<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">PageResult</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Brand</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">BrandService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 品牌
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BrandController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BrandService</span> brandService<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 品牌分页查询
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/brand/page"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PageResult</span><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">brandPageQuery</span><span class="token punctuation">(</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"page"</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> page<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"rows"</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">"5"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> rows<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"key"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> key<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"sortBy"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> sortBy<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"desc"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">Boolean</span> desc
    <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">PageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> pageResult <span class="token operator">=</span> brandService<span class="token punctuation">.</span><span class="token function">brandPageQuery</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>rows<span class="token punctuation">,</span>key<span class="token punctuation">,</span>sortBy<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>pageResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3）创建Service"><a href="#3）创建Service" class="headerlink" title="3）创建Service"></a>3）创建Service</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>conditions<span class="token punctuation">.</span>query<span class="token punctuation">.</span></span><span class="token class-name">QueryWrapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span></span><span class="token class-name">IPage</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span></span><span class="token class-name">Wrappers</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>pagination<span class="token punctuation">.</span></span><span class="token class-name">Page</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>common<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">PageResult</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BrandMapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Brand</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 品牌
 */</span>
<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BrandService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BrandMapper</span> brandMapper<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">PageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">brandPageQuery</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> page<span class="token punctuation">,</span> <span class="token class-name">Integer</span> rows<span class="token punctuation">,</span> <span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> sortBy<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.封装查询条件</span>
        <span class="token comment">//1.1 封装分页参数</span>
        <span class="token class-name">IPage</span> iPage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//1.2 封装查询条件</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token class-name">Wrappers</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//自行封装条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// name like xxx or letter = xxxx</span>
            <span class="token comment">/**
             * 参数一：字段名称（而不是属性名称）
             */</span>
            queryWrapper
                    <span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"letter"</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token comment">//排序条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>sortBy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//降序</span>
                queryWrapper<span class="token punctuation">.</span><span class="token function">orderByDesc</span><span class="token punctuation">(</span>sortBy<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token comment">//升序</span>
                queryWrapper<span class="token punctuation">.</span><span class="token function">orderByAsc</span><span class="token punctuation">(</span>sortBy<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


        <span class="token comment">//2.执行查询，获取结果</span>
        iPage <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectPage</span><span class="token punctuation">(</span>iPage<span class="token punctuation">,</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.处理结果，返回结果</span>
        <span class="token class-name">PageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> pageResult <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>iPage<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>iPage<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>iPage<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> pageResult<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4）重启ly-item测试"><a href="#4）重启ly-item测试" class="headerlink" title="4）重启ly-item测试"></a>4）重启ly-item测试</h3><p>返回状态码</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314142358935.png" alt="image-20200314142358935"></p>
<p>返回结果</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314142442476.png" alt="image-20200314142442476"></p>
<h2 id="10、品牌查询：渲染品牌分页查询页面"><a href="#10、品牌查询：渲染品牌分页查询页面" class="headerlink" title="10、品牌查询：渲染品牌分页查询页面"></a>10、品牌查询：渲染品牌分页查询页面</h2><h3 id="1）页面接收服务器返回的分页数据"><a href="#1）页面接收服务器返回的分页数据" class="headerlink" title="1）页面接收服务器返回的分页数据"></a>1）页面接收服务器返回的分页数据</h3><p>先通过页面f12的控制台查看回调函数中的resp结果的结构是如何的：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314142856884.png" alt="image-20200314142856884"></p>
<p>由resp的数据结构得知，回调函数的代码应该为：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/1605755744135.png" alt="1605755744135"></p>
<h3 id="2）修改品牌列表中图片的显示"><a href="#2）修改品牌列表中图片的显示" class="headerlink" title="2）修改品牌列表中图片的显示"></a>2）修改品牌列表中图片的显示</h3><p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314143518011.png" alt="image-20200314143518011"></p>
<h3 id="3）最终页面代码"><a href="#3）最终页面代码" class="headerlink" title="3）最终页面代码"></a>3）最终页面代码</h3><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
        &lt;v-layout row wrap&gt;
            &lt;v-flex xs6&gt;
                &lt;v-btn color="primary" round&gt;品牌添加&lt;/v-btn&gt;
            &lt;/v-flex&gt;

            &lt;v-flex xs6&gt;
                &lt;v-text-field
                        label="搜索"
                        prepend-icon="search"
                        v-model="searchKey"
                &gt;&lt;/v-text-field&gt;
            &lt;/v-flex&gt;
        &lt;/v-layout&gt;
        &lt;!--
               headers: 定义数据列表的表头数据。我们管理的
               items： 定义数据列表的内容数据。我们管理的
               pagination： 定义分页参数的对象。该对象是有Vuetify框架管理的
               total-items： 定义总记录数。我们管理的
               loading： 进度条 true： 显示，false：不显示。我们管理的
        --&gt;
        &lt;v-data-table
                :headers="headers"
                :items="desserts"
                :pagination.sync="pagination"
                :total-items="totalDesserts"
                :loading="loading"
                class="elevation-1"
        &gt;
            &lt;!--定义表格的每列的内容来自于items的哪个属性--&gt;
            &lt;template v-slot:items="props"&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.id }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.name }}&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;&lt;img :src="props.item.image"/&gt;&lt;/td&gt;
                &lt;td class="text-xs-center"&gt;{{ props.item.letter }}&lt;/td&gt;
            &lt;/template&gt;
        &lt;/v-data-table&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
        data () {
            return {
                totalDesserts: 0,
                desserts: [],
                loading: true,
                pagination: {},
                headers: [
                    { text: '品牌编号', value: 'id' , sortable:true, align:'center' },
                    { text: '品牌名称', value: 'name' , sortable:false, align:'center'},
                    { text: '品牌图片', value: 'image' , sortable:false, align:'center'},
                    { text: '品牌首字母', value: 'letter' , sortable:true, align:'center'},
                ],
                searchKey:'',//搜索关键词
            }
        },
        mounted () {
            //调用查询品牌
            this.loadBrandData();
        },
        //属性监听
        watch:{
           //监听搜索关键词
            "searchKey":{ //基本变量
                handler(){
                    //调用查询品牌
                    this.loadBrandData();
                }
            },
            "pagination":{ //监听对象，必须使用深度监听
                deep:true,
                handler(){
                    //调用查询品牌
                    this.loadBrandData();
                }
            }
        },
        methods: {
            //查询品牌分页列表
            loadBrandData(){
                //往后端微服务发送请求
                this.$http.get('/item/brand/page',{
                    params:{
                        page:this.pagination.page,
                        rows:this.pagination.rowsPerPage,
                        key:this.searchKey,
                        sortBy:this.pagination.sortBy,
                        desc:this.pagination.descending,
                    }
                }).then(resp=&gt;{
                    this.desserts = resp.data.items; //当前页列表
                    this.totalDesserts = resp.data.total; //总记录数

                    //关闭进度条
                    this.loading = false;

                }).catch(e=&gt;{
                    console.log('品牌查询失败');
                });
            }
        }
    }
&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<h2 id="11、新增品牌：思路分析"><a href="#11、新增品牌：思路分析" class="headerlink" title="11、新增品牌：思路分析"></a>11、新增品牌：思路分析</h2><p>品牌查询已经做好了，那么新增品牌我们直接在Brand.vue文件中开发即可。</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/1575365293099.png" alt="1575365293099"> </p>
<p>品牌数据如何添加？ 除了自己的数据，还有无其他数据？</p>
<p>之前分析过品牌表和分类表是多对多，分类的数据，一般变动的比较少，所以中间表我们一般让变动比较多的品牌表来维护，也就是说我们添加完品牌数据，还需要在中间表添加数据。</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/1575365502869.png" alt="1575365502869"> </p>
<pre class="line-numbers language-none"><code class="language-none">外键：
	逻辑外键：通过代码维护关系，
		优点：便于迁移
		缺点：出现脏数据
	物理外键：数据库维护关系，
		优点：数据完整
		缺点：不方便删除
		<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>品牌添加页面分析图：</p>
<p><img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314144329397.png" alt="image-20200314144329397"> </p>
<p>由品牌添加页面分析得知，品牌添加步骤分三步：</p>
<p>第一：先把图片存入到图片服务器</p>
<p>第二：把品牌对象入库</p>
<p>第三：维护品牌和分类的中间表</p>
<h2 id="12、新增品牌：完成品牌的保存和中间表的维护"><a href="#12、新增品牌：完成品牌的保存和中间表的维护" class="headerlink" title="12、新增品牌：完成品牌的保存和中间表的维护"></a>12、新增品牌：完成品牌的保存和中间表的维护</h2><h3 id="1）编写Controller"><a href="#1）编写Controller" class="headerlink" title="1）编写Controller"></a>1）编写Controller</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
     * 添加品牌
     *  1）使用对象接收数据问题
     *      Brand brand: 接收普通参数。格式： name=xxx&amp;image=xxx&amp;letter=xxxx
     *      @RequestBody Brand brand: 接收json字符串参数。格式： {name=xxx,image:xxx,letter:xxxx}
     *
     *  2）接收多个同名参数问题
     *      页面同名参数格式：
     *           1） cids=70&amp;cids=80
     *           2） cids=70,80
     *      后端如何接收
     *         1）字符串： 如： String cids;  //  70,80
     *         2）数组： 如： Long[] cids;  //  [70,80]
     *         3）集合： 如： List&lt;Long&gt; cids;  // [70,80]  注意：集合接收强制带上@RequestParam注解
     */</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/brand"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">saveBrand</span><span class="token punctuation">(</span>
            <span class="token class-name">Brand</span> brand<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"cids"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> cids

    <span class="token punctuation">)</span><span class="token punctuation">{</span>
           brandService<span class="token punctuation">.</span><span class="token function">saveBrand</span><span class="token punctuation">(</span>brand<span class="token punctuation">,</span>cids<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">//return ResponseEntity.status(HttpStatus.CREATED).body(null);</span>
           <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>CREATED<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="2）编写Service"><a href="#2）编写Service" class="headerlink" title="2）编写Service"></a>2）编写Service</h3><p>这里要注意，我们不仅要新增品牌，还要维护品牌和商品分类的中间表。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveBrand</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> cids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">try</span> <span class="token punctuation">{</span>
           <span class="token comment">//1.保存品牌表</span>
           brandMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注意：MyBatis-Plus底层会自动获取数据库自增值赋值给主键属性值</span>

           <span class="token comment">//2.保存品牌分类中间表</span>
           brandMapper<span class="token punctuation">.</span><span class="token function">saveBrandAndCategory</span><span class="token punctuation">(</span>brand<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cids<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">LyException</span><span class="token punctuation">(</span><span class="token class-name">ExceptionEnum</span><span class="token punctuation">.</span>INSERT_OPERATION_FAIL<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="3）编写Mapper"><a href="#3）编写Mapper" class="headerlink" title="3）编写Mapper"></a>3）编写Mapper</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>leyou<span class="token punctuation">.</span>item<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Brand</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Param</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 品牌
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BrandMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">saveBrandAndCategory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"bid"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"cids"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> cids<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在resource下新建一个目录：<code>mappers</code>，并在下面新建文件：<code>BrandMapper.xml</code></p>
<p> <img src="%E4%B9%90%E4%BC%98%E7%94%B5%E5%95%86-03-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86.assets/image-20200314151249920.png" alt="image-20200314151249920"></p>
<p>然后在<code>application.yml</code>文件中配置mapper文件的地址：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.leyou.item.pojo
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mappers/<span class="token important">*.xml</span> <span class="token comment">#修改Mapper映射文件的路径</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在<code>BrandMapper.xml</code>中定义Sql的statement：</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.leyou.item.mapper.BrandMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
       foreach: 循环标签
         collection： 需要遍历的值。查询别名
         item：遍历的每个元素的别名
         separator: 间隔符
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>saveBrandAndCategory<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      INSERT INTO tb_category_brand(category_id,brand_id) VALUES
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cids<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cid<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        (#{cid},#{bid})
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p>编写完成代码后，重启微服务，测试查看品牌和中间表的数据是否已经插入即可！</p>
<p>4）开启myBatis日志</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># 开启日志  </span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">com.leyou</span><span class="token punctuation">:</span> debug<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>




<h2 id="13、课程总结"><a href="#13、课程总结" class="headerlink" title="13、课程总结"></a>13、课程总结</h2><p>1）品牌分页列表</p>
<p>​     1.1 了解页面使用Vuetify组件完成基本页面制作</p>
<p>​     1.2 熟悉前端ajax请求后台过程！！！！</p>
<p>​    1.3 完成品牌列表展示</p>
<p>2）品牌添加</p>
<p>​       2.1 操作两种表，品牌表，品牌分类表</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">durex</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://chenliren9527.github.io/2020/12/27/le-you-dian-shang-03-pin-pai-guan-li/">https://chenliren9527.github.io/2020/12/27/le-you-dian-shang-03-pin-pai-guan-li/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">durex</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E7%AC%94%E8%AE%B0/">
                                    <span class="chip bg-color">笔记</span>
                                </a>
                            
                                <a href="/tags/%E5%89%8D%E7%AB%AF/">
                                    <span class="chip bg-color">前端</span>
                                </a>
                            
                                <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%BA%8C/">
                                    <span class="chip bg-color">项目实战二</span>
                                </a>
                            
                                <a href="/tags/springcloud/">
                                    <span class="chip bg-color">springcloud</span>
                                </a>
                            
                                <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">
                                    <span class="chip bg-color">微服务</span>
                                </a>
                            
                                <a href="/tags/%E5%88%86%E9%A1%B5/">
                                    <span class="chip bg-color">分页</span>
                                </a>
                            
                                <a href="/tags/Vuejs/">
                                    <span class="chip bg-color">Vuejs</span>
                                </a>
                            
                                <a href="/tags/vuetifyjs/">
                                    <span class="chip bg-color">vuetifyjs</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/12/28/le-you-dian-shang-04-pin-pai-tu-pian-shang-chuan-shang-pin-gui-ge-oss/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/16.jpg" class="responsive-img" alt="乐优电商(04)-品牌图片上传&amp;商品规格【OSS】">
                        
                        <span class="card-title">乐优电商(04)-品牌图片上传&amp;商品规格【OSS】</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-12-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%BA%8C/" class="post-category">
                                    项目实战二
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">笔记</span>
                    </a>
                    
                    <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%BA%8C/">
                        <span class="chip bg-color">项目实战二</span>
                    </a>
                    
                    <a href="/tags/springcloud/">
                        <span class="chip bg-color">springcloud</span>
                    </a>
                    
                    <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">
                        <span class="chip bg-color">微服务</span>
                    </a>
                    
                    <a href="/tags/%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/">
                        <span class="chip bg-color">图片上传</span>
                    </a>
                    
                    <a href="/tags/OSS/">
                        <span class="chip bg-color">OSS</span>
                    </a>
                    
                    <a href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91/">
                        <span class="chip bg-color">阿里云</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/12/26/le-you-dian-shang-02-shang-pin-fen-lei/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/104.jpg" class="responsive-img" alt="乐优电商(02)-商品分类">
                        
                        <span class="card-title">乐优电商(02)-商品分类</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-12-26
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%BA%8C/" class="post-category">
                                    项目实战二
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">笔记</span>
                    </a>
                    
                    <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%BA%8C/">
                        <span class="chip bg-color">项目实战二</span>
                    </a>
                    
                    <a href="/tags/springcloud/">
                        <span class="chip bg-color">springcloud</span>
                    </a>
                    
                    <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">
                        <span class="chip bg-color">微服务</span>
                    </a>
                    
                    <a href="/tags/nginx/">
                        <span class="chip bg-color">nginx</span>
                    </a>
                    
                    <a href="/tags/CORS/">
                        <span class="chip bg-color">CORS</span>
                    </a>
                    
                    <a href="/tags/%E8%B7%A8%E5%9F%9F/">
                        <span class="chip bg-color">跨域</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2022</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">durex</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">896.5k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "1";
                    var startDate = "08";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">














    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
